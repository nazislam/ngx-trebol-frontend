<!--
  Copyright (c) 2022 The Trebol eCommerce Project

  This software is released under the MIT License.
  https://opensource.org/licenses/MIT
-->

<fieldset [formGroup]="formGroup">
  <mat-form-field class="date">
    <input matInput formControlName="date"
      placeholder="Date and time"
      i18n-placeholder="Name of field for date and time of sell" />
  </mat-form-field>

  <mat-form-field class="billingType">
    <mat-select formControlName="billingType"
      placeholder="Billing type"
      i18n-placeholder="Name of field for billing type of sell">
      <mat-option *ngFor="let b of (billingTypes$ | async)"
        [value]="b.name">{{ b.name }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field class="salesperson">
    <mat-select formControlName="salesperson"
      placeholder="Salesperson"
      i18n-placeholder="Name of field for salesperson that earned/is in charge of sell">
      <mat-option *ngFor="let e of (salespeople$ | async)"
        [value]="e">{{ e.person.firstName + ' ' + e.person.lastName }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field class="customer">
    <mat-select formControlName="customer"
      placeholder="Customer"
      i18n-placeholder="Name of field for purchasing customer in sell ">
      <mat-option *ngFor="let c of (customers$ | async)"
        [value]="c">{{ c.person.firstName + ' ' + c.person.lastName }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-card class="details">
    <div class="header">
      <h3 i18n="Title of table displaying products and details of sell">Checkout Details</h3>
      <button mat-button mat-raised-button type="button"
        color="primary"
        (click)="onClickAddProducts()"
        i18n="add products|Label for action button to include products into sell">Add</button>
    </div>
    <app-sell-details-table [editable]="true"
      [sellDetails]="sellDetails$ | async"
      [tableColumns]="tableColumns"
      (increaseUnitsAtIndex)="onClickIncreaseDetailProductQuantity($event)"
      (decreaseUnitsAtIndex)="onClickDecreaseDetailProductQuantity($event)"
      (removeAtIndex)="onClickRemoveDetail($event)">
    </app-sell-details-table>
  </mat-card>

  <div class="summary">
    <div>{{ sellNetValueLabel$ | async }}</div>
    <div>{{ sellTotalValueLabel$ | async }}</div>
  </div>
</fieldset>
