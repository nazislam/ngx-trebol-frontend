<!--
  Copyright (c) 2021 The TrÃ©bol eCommerce Project

  This software is released under the MIT License.
  https://opensource.org/licenses/MIT
-->

<div class="slides">
  <ng-container *ngIf="images?.length; else noImageAvailable">
    <div *ngFor="let image of images; index as i"
      class="slide-wrapper">
      <img [hidden]="(currentIndex$ | async) != i"
        [src]="image.url" alt="" [@fadeInOut]="((currentIndex$ | async) != i) ? 'transparent' : 'opaque'"
        (mouseenter)="stopAutoRotation()" (mouseleave)="startAutoRotation()" />
    </div>
    <ng-container *ngIf="editable">
      <button type="button" class="slide-remove"
        mat-button mat-mini-fab
        color="warn"
        (click)="onClickRemove()">
        <mat-icon>delete</mat-icon>
      </button>
    </ng-container>
  </ng-container>
  <ng-template #noImageAvailable>
    <div class="slide-wrapper">
      <img src="assets/img/products/unavailable.png"
        alt="Unavailable image"
        i18n-alt="Label to describe a missing or unavailable image" />
    </div>
  </ng-template>
</div>
<div class="selectors">
  <ng-container *ngFor="let image of images; index as i">
    <button type="button" class="slide-selector"
      mat-button mat-icon-button
      attr.aria-label="Navigate to slide {{i+1}}"
      attr.i18n-aria-label="Label for action button to navigate to slide/image number {{i+1}}"
      [class.selected]="(currentIndex$ | async) === i"
      [disabled]="(currentIndex$ | async) === i"
      (click)="goToSlide(i)">
      <mat-icon>{{ (currentIndex$ | async) === i ? 'radio_button_checked' : 'radio_button_unchecked'}}</mat-icon>
    </button>
  </ng-container>
  <ng-container *ngIf="editable">
    <button type="button" class="slide-add"
      mat-button mat-icon-button
      aria-label="Agregar imagen"
      i18n-aria-label="Label for action button to add a slide/image"
      (click)="onClickAdd()">
      <mat-icon>add_circle_outline</mat-icon>
    </button>
  </ng-container>
</div>
