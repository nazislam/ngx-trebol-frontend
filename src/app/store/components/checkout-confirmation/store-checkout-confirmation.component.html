<!--
  Copyright (c) 2021 The Trébol eCommerce Project

  This software is released under the MIT License.
  https://opensource.org/licenses/MIT
-->

<mat-card *ngIf="checkoutRequest">
  <mat-card-header>
    <h3 mat-card-title i18n="Title of widget to request confirmation of billing/personal/shipping information being correct">¿Son estos datos correctos?</h3>
  </mat-card-header>
  <div class="customer">
    <ng-container *ngIf="checkoutRequest.customer; else noCustomer">
      <mat-icon>person</mat-icon>&nbsp;
      <span class="details">
        <span class="name">{{ checkoutRequest.customer.firstName }} {{ checkoutRequest.customer.lastName }}</span>
        <b class="idCard">RUT {{ checkoutRequest.customer.idNumber }}</b>
        <i class="email">{{ checkoutRequest.customer.email }}</i>
      </span>
    </ng-container>
    <ng-template #noCustomer>
      <mat-icon>person_off</mat-icon>&nbsp;
      <span class="details">
        <span class="name" i18n="Label to indicate that current customer chose not to give personal information">Cliente anónimo</span>
      </span>
    </ng-template>
  </div>
  <div class="type" *ngIf="checkoutRequest.billing.sellType">
    <mat-icon>receipt</mat-icon>&nbsp;
    <span>{{ checkoutRequest.billing.sellType }}</span>
  </div>
  <div class="company" *ngIf="checkoutRequest.billing.company">
    <mat-icon>business</mat-icon>&nbsp;
    <span class="details">
      <span class="name">{{ checkoutRequest.billing.company.name }}</span>
      <b class="idNumber">RUT {{ checkoutRequest.billing.company.idNumber }}</b>
    </span>
  </div>
  <div class="shipping">
    <ng-container *ngIf="checkoutRequest.shipping?.shippingAddress; else noShipping">
      <mat-icon>local_shipping</mat-icon>&nbsp;
      <span>{{ checkoutRequest.shipping.shippingAddress | address }}</span>
    </ng-container>
    <ng-template #noShipping>
      <mat-icon>local_shipping</mat-icon>&nbsp;
      <span i18n="in-store delivery|Label to choose to pick up items in store">Retiro en Tienda</span>
    </ng-template>
  </div>
</mat-card>
<p i18n="Label to instruct user that, after having checked correctness of billing/personal/shipping information, they click the action button to request a new transaction">Si está segur@ que la información ingresada es correcta,
  haga clic en el botón 'Solicitar transacción':</p>
<button type="button" class="request"
  mat-button mat-raised-button
  color="accent"
  [disabled]="loading"
  (click)="onClickRequest()">
  <span i18n="Label for action button to request a new transaction from payment service">Solicitar transacción</span>
  <mat-icon>point_of_sale</mat-icon>
</button>
<mat-divider></mat-divider>
<p i18n="Label to instruct user that, after requesting and waiting for a new transaction, they click the action button to proceed towards payment page">Una vez solicitada la transacción,
  puede proceder dando clic al botón 'Ir al pago':</p>
<app-store-checkout-button
  [checkoutDetails]="checkoutDetails">
</app-store-checkout-button>
